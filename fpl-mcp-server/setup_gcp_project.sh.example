#!/bin/bash

# This is an example configuration file. Copy this to setup_gcp_project.sh
# and fill in your specific project details.

# Exit immediately if a command exits with a non-zero status.
set -e

# --- Configuration Variables ---
PROJECT_ID="your-gcp-project-id" # Your Google Cloud Project ID
REGION="us-central1"     # Your desired region
REPO_NAME="fpl-mcp-repo" # Your Artifact Registry repository name

# The service account for Cloud Build. Find this in the IAM section of your GCP console.
# It typically looks like [PROJECT_NUMBER]@cloudbuild.gserviceaccount.com
CLOUD_BUILD_SA_EMAIL="[PROJECT_NUMBER]@cloudbuild.gserviceaccount.com"

# The dedicated service account for the Cloud Run service itself.
SERVICE_ACCOUNT_NAME="fpl-mcp-run-sa"
SERVICE_ACCOUNT_FULL_EMAIL="${SERVICE_ACCOUNT_NAME}@${PROJECT_ID}.iam.gserviceaccount.com"

# The personal user account that performs the deployment.
# This should be the email you use to log in to gcloud.
DEPLOYING_USER_EMAIL="your-email@example.com"


echo "--- Setting up Google Cloud Project: ${PROJECT_ID} ---"

# 1. Set the active Google Cloud project
echo "Setting active gcloud project to ${PROJECT_ID}..."
gcloud config set project "${PROJECT_ID}"

# 2. Enable necessary Google Cloud APIs
echo "Enabling required APIs..."
gcloud services enable \
    cloudbuild.googleapis.com \
    artifactregistry.googleapis.com \
    run.googleapis.com \
    logging.googleapis.com \
    iam.googleapis.com \
    firestore.googleapis.com \
    --project "${PROJECT_ID}"

# ... (The rest of the script remains the same) ...
